---
title: "Identifying Airbnb Trends Across the US"
author: "Louis Kim"
date: "11/26/2021"
output:
  rmdformats::material:
    thumbnails: false
    highlight: "kate"
---

```{r setup, include = FALSE}
library(tidyverse)
library(kableExtra)
library(robotstxt) 
library(rvest) 
library(purrr)
library(janitor)
library(tidytext)
library(readr)
library(ggplot2)
library(ggmap)
library(RColorBrewer)
library(car)
library(scales)
library(treemap)
library(leaflet)
library(tm)
library(wordcloud)
library(wordcloud2)

# Set code chunk defaults 
knitr::opts_chunk$set(echo = FALSE, 
                      mesage = FALSE,
                      warning = FALSE,
                      fig.align = "center")

# Set R environment options
options(knitr.kable.NA = '')
```

```{r import-data, include = FALSE}
all_listings <- read_csv("airbnb_master.csv")
all_hosts <- read_csv("host_master.csv")
```

# **Introduction**




# **The Data**

The data for this project was downloaded from a KAGGLE dataset. I found a 3rd party website, InsideAirbnb, that scrapes public Airbnb website data and provides downloadable csvs for datasets pertaining to locales around the world.

I first identified that I wanted to focus on identifying trends within the United States; thus, I downloaded csv files for each of the 





# **Describing and Naming Your Airbnb**

**Purpose:** Part of being a successful Airbnb Host depends on your ability to persuade users to select your house over dozesn of similar options. Whether it be through fancy photos or a vast menu of amenities, hosts also seem to focus on utilizing key buzz words to grab Airbnb users' attention. 

The following section utilizes the `wordcloud` package to generate graphics relating to the frequency in which Airbnb buzz words appear in listing descriptions and names. In addition, word frequency bar charts are also generated as another means of comparing the frequencies of the most popular words in Airbnb Listing names and descriptions.

* Listing Description: set of words used to describe an Airbnb Listing
* Listing Name: set of words used as the name of the Airbnb Listing

## **Word Clouds** {.tabset .tabset-fade .tabset-pills}

**Method:** In order to prepare my data for the wordcloud creation, I utilized the `tm` package to wrangle my data and create a data frame with all the words utilized in the airbnb listings descriptions and names. 

Because I already had columns (listing_name, listing_description) in my bulk dataset `all_listings` that provide the description and name for every unique airbnb property, the `tm` package made it very easy to prepare a simple data frame with every word in the listing_name and listing_description columns and their respective frequencies.

```{r Word Cloud Prep, include = FALSE}
description_words <- read_csv("description_words.csv")
name_words <- read_csv("name_words.csv")
```

### Listing Name
```{r Listing Name Word Cloud, echo = FALSE, fig.width = 7, fig.height = 3.2, fig.align='left'}
# Set wordcloud seed for consistency
set.seed(50)

# Create wordcloud
wordcloud(words = name_words$word,
          freq = name_words$freq,
          min.freq = 1, 
          max.words=70, 
          random.order=FALSE, 
          rot.per=0.3,          
          colors=brewer.pal(8, "Dark2"))
```

**Takeaways:** The wordclouds are compiled by taking the most frequent words in the Airbnb Listing Names and Descriptions. As indicated by the graphic, some key words that many current Airbnb hosts utilize include "Private", "Bedroom", "Spacious" "Home".

A quick glance at the wordcloud shows that many of the words used for the Airbnb Listing name seem to serve a couple primary purposes: 
* Describe the physical location
* Describe the type of property

Many of the words serve as adjectives describing the house such as "charming", "Beautiful", "Gorgeous". In addition, we also seem to have many words that describe the type of property that host is advertising: "Apartment", "Oceanfront", "Modern", "Suite", "Studio".

### Listing Description
```{r Listing Description Word Cloud, echo = FALSE, fig.width = 7, fig.height = 3.2, fig.align='left'}
# Set wordcloud seed for consistency
set.seed(50)

# Create wordcloud
wordcloud(words = description_words$word,
          freq = description_words$freq,
          min.freq = 1, 
          max.words=70, 
          random.order=FALSE, 
          rot.per=0.1,            
          colors=brewer.pal(8, "Dark2"))
```

**Takeaways:** The wordclouds are compiled by taking the most frequent words in the Airbnb Listing Names and Descriptions. As indicated by the graphic, some key words that many current Airbnb hosts utilize include "Private", "Bedroom", "Spacious" "Home".

A quick glance at the wordcloud shows that many of the words used for the Airbnb Listing name seem to serve a couple primary purposes: 
* Describe the physical location
* Describe the type of property

Many of the words serve as adjectives describing the house such as "charming", "Beautiful", "Gorgeous". In addition, we also seem to have many words that describe the type of property that host is advertising: "Apartment", "Oceanfront", "Modern", "Suite", "Studio".

## **Word Barcharts** {.tabset .tabset-fade .tabset-pills}

**Method** Along with the `ggplot2` package, I utilized the same dataframes created by my wordcloud wrangling to create barcharts of the top 10 occuring words in the Airbnb Listing Name and Description. 

```{r Word Barchart Prep, include = FALSE}
name_freq <- name_words[order(-name_words$freq),] %>%
  top_n(10)
desc_freq <- description_words[order(-description_words$freq),] %>%
  top_n(10)
```

### Listing Name
```{r Listing Name Bar Chart, echo = FALSE, fig.align='left', fig.width = 7.5, fig.height = 3.5}
# Create plot object
name_bar <- ggplot(data = name_freq, aes(x=reorder(word, freq), y=freq, fill = word)) +
  geom_col() +
  coord_flip() + 
  xlab("") + 
  ylab("Frequency") + 
  ggtitle("Listing Name - Word Frequency")
  
# Print plot
name_bar
```

**Takeaways:** For the Listing Name bar chart, we can see that the most commonly used word is "Private" From personal experience, I remember that one of my search criteria in looking for an Airbnb to stay at was that the property is for myself and only myself. The keyword "Private" is most likely used in the Airbnb Listing Name so that users can quickly assess if the property will be for their use only.

The "Private" distinction may serve to be very important since Airbnb Hosts want to effectively communicate what type of property a user may be inquiring for. It would be very frustrating for users if they were to discover that their airbnb of interest was not "Private" later rather than earlier in their booking process.

### Listing Description
```{r Listing Description Bar Chart, echo = FALSE, fig.align='left', fig.width = 7.5, fig.height = 3.5}
# Create plot object
desc_bar <- ggplot(data = desc_freq, aes(x=reorder(word, freq), y=freq, fill = word)) +
  geom_col() +
  coord_flip() + 
  xlab("") + 
  ylab("Frequency") + 
  ggtitle("Listing Description - Word Frequency")

# Print plot
desc_bar
```

**Takeaways:** For the Listing Name bar chart, we can see that the most commonly used word is "Private" From personal experience, I remember that one of my search criteria in looking for an Airbnb to stay at was that the property is for myself and only myself. The keyword "Private" is most likely used in the Airbnb Listing Name so that users can quickly assess if the property will be for their use only.

The "Private" distinction may serve to be very important since Airbnb Hosts want to effectively communicate what type of property a user may be inquiring for. It would be very frustrating for users if they were to discover that their airbnb of interest was not "Private" later rather than earlier in their booking process.





# **Trends in Airbnb Hosts**

**Purpose:** Lets consider the perspective of an Airbnb Host. What qualities of the Airbnb Hosts matter most in terms of generating high rates of bookings for their properties. 

This section strives to identify key variables regarding Airbnb Hosts that ultimately drive their success. While exploring the dataset from InsideAirbnb, I found a vast array of variables that could be used to explore Airbnb Host qualities. These variables include:
* `host_since`: Date when host joined
* `host_response_proportion`: Proportion of booking messages that the Host responds too
* `host_acceptance_proportion`: Proportion of booking requests that the Host accepts
* 




## **




# **Trends in Airbnb Listings**


# **Conclusions**














# Header 1 (Section heading)

## Header 2 (Subsection heading)

### Header 3 (Subsubsection heading)

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For example, you can include **Bold** and _Italic_ and `Code` text.  For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

You should test out updating your GitHub Pages website:

* clone your group's blog project repo in RStudio
* update "Your Project Title Here" to a new title in the YAML header
* knit `index.Rmd` (we will now knit to HTML by default instead of pdf)
* commit and push **both** `index.Rmd` and `index.html`
* go to https://stat231-f21.github.io/blog_lokim/ to see the published test document (this is publicly available!)

## Including code and plots

You can embed code as normal, for example:

```{r cars}
summary(cars)
```

Let's clean up the format of that output instead of using the standard R output:

```{r pretty-table, echo = TRUE}
summary(cars) %>%
  kable(col.names = c("Speed", "Distance"),
        row.names = FALSE) %>%
  kable_styling(bootstrap_options = "striped",
                full_width = FALSE) %>%
  row_spec(0, bold = TRUE) %>%
  column_spec(1:2, width = "1.5in") 
```

In a study from the 1920s, fifty cars were used to see how the speed of the car and the distance taken to stop were related.  Speeds ranged between `r min(cars$speed)` and `r max(cars$speed)` mph.  Distances taken to stop ranged between `r min(cars$dist)` and `r max(cars$dist)` feet, with the middle 50% falling between `r as.numeric(quantile(cars$dist)[2])` and `r as.numeric(quantile(cars$dist)[4])` feet.  

You can also embed plots as normal, for example:

```{r figure1}
ggplot(data = cars, aes(x = speed, y = dist)) + 
  geom_point() + 
  labs(x = "Speed of car (mph)",
       y = "Distance taken to stop (ft)",
       title = "Stopping distance increases with faster speeds",
       subtitle = "Based on 1920s study") +
  theme_classic()
```

Take note of the default code chunk options in the `setup` code chunk, and adjust individual code chunk options as needed. for example, unlike the rest of the Rmd files we worked in this semester, the default code chunk option is `echo = FALSE`, so you will need to set `echo  = TRUE` for any code chunks you would like to display in the blog. 


## Including links and images/videos

You can include [links](https://www.datadreaming.org/post/r-markdown-theme-gallery/) and there are a few ways to embed  images! Both options for embedding images below can be used interchangeably. They both work for png, pdf, jpg, and even gif formats, and both support filepaths that are either URLs (for videos, you can include links to any valid YouTube or Vimeo URLs; see [here](https://bookdown.org/yihui/rmarkdown/learnr-videos.html) for more details) or point to a location within your project directory. 

### Option 1: Markdown approach

![This is a figure caption. The artwork is called Safe Space by  [Kenesha Sneed](https://www.keneshasneed.com/#/safespace/)](img/Kenesha-Sneed_safe-space.jpeg)


### Option 2: Code chunk approach

```{r, fig.cap = "This is also figure caption"}
knitr::include_graphics("https://media.giphy.com/media/H7ZrrA9V2pd3Tehdds/giphy.gif")
```

## Including equations

Equations may be needed if you are explaining a new technique or perhaps providing some other relevant formulas in your exposition. There are two ways to include equations:

* Inline: $b \sim N(0, \sigma^2_b)$
* Display-style (displayed on its own line): $$\frac{\sigma^2_b}{\sigma^2_b + \sigma^2_e}$$

For typesetting equations appropriately, take a look at the *Symbols in math mode* section of this  [cheat sheet](https://users.dickinson.edu/~richesod/latex/latexcheatsheet.pdf)  (or do some extra Googling---there are *many* resources).




